# extends "base.html"
# block body
# set count = namespace(myown=0,citwos=0,citscopus=0,cit=0)
# macro publication(rec)
  {{  rec.authors_format("{f. }{vv}{ll{ }}{, jj}")|join(", ") }}:
  {{rec.title}},   
    #if rec.type=='article':
        <em>{{rec.journal}}</em>,
        <strong>{{rec.volume}}</strong>
        ({{rec.year}}),
    # elif rec.type=='inproceedings' or rec.type=='incollection':
       In: <em>{{rec.booktitle}}</em>,
       # if rec.series:
         {{rec.series}},
           # if rec.volume: 
             Vol. <strong>{{rec.volume}}</strong>,
           # endif 
       # endif
       # if rec.publisher: 
           {{rec.publisher}},
       # endif    
       {{rec.year}},
    
    # endif
    # if rec.startpage and rec.endpage
           {{rec.startpage}}-{{rec.endpage}},
    # endif
    # if rec.article_number
         art. nr.   {{rec.article_number}},
    # endif

# endmacro
# for rec in records_by_type('MyOwn')
  # if rec.citedby:
  <h3>Paper:</h3>
  <p>
  # set count.myown = count.myown + 1
  {{ publication(rec) }}
    # if rec.preprint
           arxiv:{{rec.preprint}},
    # endif      
    {{rec.kategoria}}
  </p>
  <h3>
  Cited in ({{ rec.citedby | length}}):
  </h3>
  <ol>
  # for rec_cited in rec.citedby:
    # set count.cit = count.cit +1
    # if "wos" in rec_cited.tags
      # set count.citwos = count.citwos +1
    # endif
    # if "scopus" in rec_cited.tags
      # set count.citscopus = count.citscopus +1
    # endif
    <li>
    {{ publication(rec_cited) }}
    # for tag in rec_cited.tags:
    [{{tag}}]
    # endfor
    # if 'as-preprint' in edge_tags[("cites",rec_cited._key,rec._key)]:
    (Cited as preprint)
    # endif

    </li>
  # endfor
  </ol>
  <hr>
  #endif
# endfor
<h3>Number of cited papers: {{count.myown}}</h3>
<h3>Number of citations: {{count.cit}}</h3>
<h3>Number of citations in WOS: {{count.citwos}}</h3>
<h3>Number of citations in Scopus: {{count.citscopus}}</h3>
# endblock

